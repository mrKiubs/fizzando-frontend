<a
  class="ingredient-card-link"
  [routerLink]="['/ingredients', getIngredientId(ingredient)]"
  [attr.href]="'/ingredients/' + getIngredientId(ingredient)"
  [attr.aria-label]="
    'Ingredient: ' +
    (ingredient.name || 'Unnamed ingredient') +
    (ingredient.ingredient_type ? ', type ' + ingredient.ingredient_type : '') +
    (ingredient.isAlcoholic
      ? ', Alcoholic ingredient'
      : ', Non-alcoholic ingredient')
  "
  [@cardAnimation]
  role="article"
  [attr.aria-labelledby]="'ingredient-title-' + getIngredientId(ingredient)"
>
  <div class="glass-card ingredient-layout">
    <div
      class="image-wrapper"
      role="figure"
      [attr.aria-label]="'Photo of ' + ingredient.name"
    >
      <picture>
        <!-- Preferisci WebP -->
        <source
          [srcset]="webpSrc(ingredient.image)"
          type="image/webp"
          sizes="60px"
        />
        <!-- Fallback JPG/PNG -->
        <img
          [src]="getIngredientCardImageUrl(ingredient.image)"
          [alt]="
            ingredient.name
              ? 'Photo of ' + ingredient.name + ' ingredient'
              : 'Ingredient photo'
          "
          [attr.loading]="priority ? 'eager' : 'lazy'"
          [attr.fetchpriority]="priority ? 'high' : 'low'"
          decoding="async"
          width="60"
          height="60"
        />
      </picture>
    </div>

    <div class="ingredient-details">
      <h3
        class="ingredient-name no-color"
        [attr.id]="'ingredient-title-' + getIngredientId(ingredient)"
      >
        {{ ingredient.name }}
      </h3>

      <p
        class="ingredient-type"
        *ngIf="ingredient.ingredient_type"
        [attr.aria-label]="'Type: ' + ingredient.ingredient_type"
      >
        {{ ingredient.ingredient_type }}
      </p>
    </div>
  </div>
</a>
